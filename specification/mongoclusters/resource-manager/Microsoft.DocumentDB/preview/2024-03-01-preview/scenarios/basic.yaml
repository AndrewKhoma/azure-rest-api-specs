# yaml-language-server: $schema=https://raw.githubusercontent.com/Azure/azure-rest-api-specs/main/documentation/api-scenario/references/v1.2/schema.json
scope: ResourceGroup
variables:
  mongoClusterName:
    type: string
    prefix: mongoclu
  administratorLoginPassword:
    type: secureString
  firewallRuleName:
    type: string
    prefix: firewall
scenarios:
  - scenario: basic
    description: Basic scenario for creating, reading and deleting a Mongo Cluster.
    steps:
      - step: MongoCluster_CheckNameAvailability
        exampleFile: ../examples/MongoClusterNameAvailability.json
      - step: MongoCluster_CreateOrUpdate
        exampleFile: ../examples/MongoClusterCreate.json
        requestUpdate:
          - replace: /resource/properties/administratorLoginPassword
            value: $(administratorLoginPassword)
      - step: MongoCluster_ListByResourceGroup
        exampleFile: ../examples/MongoClusterListByResourceGroup.json
      - step: MongoCluster_Get
        exampleFile: ../examples/MongoClusterGet.json
      - step: FirewallRules_CreateOrUpdate
        exampleFile: ../examples/MongoClusterFirewallRuleCreate.json
      - step: FirewallRules_ListByMongoCluster
        exampleFile: ../examples/MongoClusterFirewallRuleList.json
      - step: FirewallRules_Get
        exampleFile: ../examples/MongoClusterFirewallRuleGet.json
      - step: MongoCluster_ListConnectionStrings
        exampleFile: ../examples/MongoClusterListConnectionStrings.json
      - step: MongoCluster_Update
        exampleFile: ../examples/MongoClusterPatchDiskSize.json
      - step: FirewallRules_Delete
        exampleFile: ../examples/MongoClusterFirewallRuleDelete.json
      - step: MongoCluster_Delete
        exampleFile: ../examples/MongoClusterDelete.json